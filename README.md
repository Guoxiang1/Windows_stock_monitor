# 股票行情悬浮窗监控程序

一个基于Python开发的股票实时行情监控工具，支持多市场股票显示，提供悬浮窗实时行情和K线图切换功能。

## 功能特性

- ✅ **多市场支持**：支持上证、深证、美股和期货市场（如XAUUSD黄金）
- ✅ **实时行情**：自动刷新显示最新股票价格、涨跌幅等信息
- ✅ **K线图表**：点击切换查看30天日K线走势图
- ✅ **悬浮窗显示**：小巧的桌面悬浮窗，不影响其他工作
- ✅ **窗口置顶**：可选择是否将窗口置顶显示
- ✅ **股票管理**：自定义添加/删除监控的股票代码
- ✅ **暗色主题**：护眼的深色界面设计

## 系统要求

- Windows 10/11
- Python 3.7+
- 网络连接（用于获取股票数据）

## 安装步骤

### 1. 安装Python依赖

```bash
cd stock_monitor
pip install -r requirements.txt
```

### 2. 运行程序

```bash
python main.py
```

## 使用说明

### 启动程序

运行 `main.py` 后，程序会自动显示悬浮窗，默认显示上证指数的实时行情。

### 添加股票

1. 点击工具栏的**管理**按钮
2. 在弹出的窗口中点击**添加股票**
3. 输入股票代码、名称，并选择市场类型
4. 点击确定保存

### 市场类型说明

| 市场类型 | 代码 | 示例 |
|---------|------|------|
| 上证 | sh | 000001 (上证指数) |
| 深证 | sz | 399001 (深证成指) |
| 美股 | us | AAPL (苹果) |
| 期货 | hf | XAUUSD (黄金) |

### 常用股票代码参考

**A股指数：**
- 000001 - 上证指数 (sh)
- 399001 - 深证成指 (sz)
- 399006 - 创业板指 (sz)

**A股个股示例：**
- 600519 - 贵州茅台 (sh)
- 000858 - 五粮液 (sz)
- 601318 - 中国平安 (sh)

**美股示例：**
- AAPL - 苹果 (us)
- TSLA - 特斯拉 (us)
- MSFT - 微软 (us)

**期货示例：**
- XAUUSD 或 XAU - 伦敦金 (hf)
- XAGUSD 或 XAG - 伦敦银 (hf)
- CL - WTI原油 (hf)
- NG - 天然气 (hf)
- GC - COMEX黄金 (hf)
- SI - COMEX白银 (hf)

### 切换显示模式

- 点击**切换K线**按钮可以在实时行情和K线图之间切换
- K线图显示最近30天的日线数据

### 窗口置顶

- 勾选工具栏右侧的**置顶**复选框，窗口将保持在最前端
- 取消勾选则窗口表现为普通窗口

### 刷新数据

- 程序默认每5秒自动刷新一次数据
- 也可以点击**刷新**按钮手动刷新

## 配置文件说明

程序会在同级目录下自动生成 `config.json` 配置文件：

```json
{
    "stocks": [
        {
            "code": "000001",
            "name": "上证指数",
            "market": "sh"
        }
    ],
    "settings": {
        "topmost": true,
        "refresh_interval": 5,
        "window_width": 400,
        "window_height": 300
    }
}
```

**配置项说明：**
- `stocks`: 监控的股票列表
- `topmost`: 是否置顶显示（true/false）
- `refresh_interval`: 数据刷新间隔（秒）
- `window_width`: 窗口宽度（像素）
- `window_height`: 窗口高度（像素）

## 目录结构

```
stock_monitor/
├── main.py              # 主程序入口
├── api_client.py        # 网易财经API客户端
├── kline_chart.py       # K线图绘制模块
├── config.json          # 配置文件（自动生成）
├── requirements.txt     # Python依赖
└── README.md           # 使用说明
```

## 技术栈

- **GUI框架**: tkinter (Python内置)
- **数据源**: 东方财富API（实时行情）+ 腾讯财经API（K线数据）
- **图表库**: matplotlib
- **HTTP请求**: requests

## 注意事项

1. **网络连接**：程序需要联网才能获取股票数据
2. **数据准确性**：实时行情数据来自东方财富API，准确可靠
3. **交易时间**：非交易时间显示的是最后交易日的收盘数据
4. **期货支持**：已支持黄金、白银、原油等主流期货品种的实时行情
5. **K线图支持**：支持上证和深证A股K线数据，美股和期货K线使用模拟数据
6. **API稳定性**：如遇到数据无法获取，请检查网络连接或稍后重试

## 常见问题

### 1. 无法显示K线图？

- 检查matplotlib是否正确安装：`pip install matplotlib`
- 确认股票代码和市场类型是否正确

### 2. 数据无法刷新？

- 检查网络连接
- 确认股票代码是否有效
- 查看控制台是否有错误信息

### 3. 窗口显示不正常？

- 调整 `config.json` 中的窗口大小设置
- 重启程序

## 更新日志

### v1.0.1 (2026-01-05)
- 修复期货数据获取问题
- 新增黄金、白银、原油等期货品种支持
- 期货实时行情数据来自东方财富API
- 优化期货代码映射机制

### v1.0.0 (2026-01-05)
- 首次发布
- 支持多市场股票监控（A股、美股、期货）
- 实时行情和K线图切换
- 窗口置顶功能
- 股票管理功能

## 免责声明

本程序仅供学习交流使用，股票数据来自网易财经，数据准确性和实时性不作保证。投资有风险，入市需谨慎。

## 许可证

MIT License

## 作者

股票行情监控程序开发团队

## 反馈与建议

如有问题或建议，欢迎提出反馈。
